<link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />

<div class="container">
  <form method="POST" action="/posts/newPost">
    <input
      name="postTitle"
      class="form-control form-control-lg"
      type="text"
      placeholder="Title"
      value="<%= typeof postTitle != 'undefined' ? postTitle : '' %>"
    />
    <br />

    <% include ./partials/errors/newPostNoTitle %>
    <input
      name="postSubtitle"
      class="form-control "
      type="text"
      placeholder="Subtitle"
      value="<%= typeof postSubtitle != 'undefined' ? postSubtitle : '' %>"
    />
    <br />

    <input name="postText" type="hidden" />
    <div id="editor">
      <p>Text</p>
    </div>
    <br />
    <input class="btn btn-primary" type="submit" value="Submit" />
    <br />
    <% include ./partials/errors/newPostError %>
    <div></div>
    <% include ./partials/errors/newPostRecentlyCreated %>
  </form>
</div>

<script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
  const quill = new Quill("#editor", {
    theme: "snow"
  });

  var form = document.querySelector("form");
  form.onsubmit = function(event) {
    // Populate hidden text form on submit
    var editor = document.getElementById("editor");
    console.log(editor.innerHTML);
    var postText = document.querySelector("input[name=postText]");
    postText.value = quill.root.innerHTML;
  };
</script>
